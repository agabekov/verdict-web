<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Verdict - Download App</title>
    <meta name="description" content="Watch, rate, and share movies and TV shows with friends. Download Verdict app now.">
    <link rel="canonical" href="https://verdict.daniyar.link">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Verdict - Watch. Rate. Share with friends">
    <meta property="og:description" content="Discover, rate, and share your favorite movies and TV shows with friends. Available now on the App Store.">
    <meta property="og:image" content="https://verdict.daniyar.link/AppIcon.png">
    <meta property="og:url" content="https://verdict.daniyar.link">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="Verdict">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Verdict - Watch. Rate. Share with friends">
    <meta name="twitter:description" content="Discover, rate, and share your favorite movies and TV shows with friends. Available now on the App Store.">
    <meta name="twitter:image" content="https://verdict.daniyar.link/AppIcon.png">
    <meta name="twitter:creator" content="@daniyar_ag">
    
    <!-- Additional Meta Tags -->
    <meta name="keywords" content="movies, tv shows, rating, social, entertainment, app">
    <meta name="author" content="Daniyar Agabekov">
    <meta name="theme-color" content="#1a1a1a">
    <link rel="sitemap" type="application/xml" href="/sitemap.xml">
    
    <link rel="icon" type="image/png" href="./favicon.ico">
    <link rel="apple-touch-icon" href="./AppIcon.png">
    
    <!-- Performance optimizations -->
    <link rel="preconnect" href="https://tools.applemediaservices.com">
    <link rel="preconnect" href="https://scripts.simpleanalyticscdn.com">
    <link rel="dns-prefetch" href="https://go.daniyar.link">
    
    <!-- JSON-LD Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "MobileApplication",
      "name": "Verdict",
      "description": "Watch, rate, and share movies and TV shows with friends",
      "applicationCategory": "Entertainment",
      "operatingSystem": "iOS",
      "url": "https://verdict.daniyar.link",
      "downloadUrl": "https://go.daniyar.link/verdict-web",
      "author": {
        "@type": "Person",
        "name": "Daniyar Agabekov"
      },
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      }
    }
    </script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #000;
            min-height: 100vh;
            color: white;
            position: relative;
            overflow-x: hidden;
            overflow-y: auto;
            margin: 0;
            padding: 0;
        }
        
        .background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            filter: blur(30px);
            z-index: -2;
        }
        
        .background-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, rgba(0,0,0,0) 0%, rgba(0,0,0,0.9) 70%, rgba(0,0,0,1) 100%);
            z-index: -1;
            pointer-events: none;
        }
        
        .container {
            text-align: center;
            max-width: 1200px;
            margin: 0 auto;
            padding: 60px 20px 40px;
            position: relative;
            z-index: 1;
            width: 100%;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        .main-content {
            max-width: 400px;
            margin: 0 auto 40px;
            flex-shrink: 0;
        }
        
        .app-icon {
            width: 120px;
            height: 120px;
            background-image: url('./AppIcon.png');
            background-size: cover;
            background-position: center;
            border-radius: 24px;
            margin: 0 auto 24px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 16px;
            font-weight: 700;
        }
        
        .subtitle {
            font-size: 1.1rem;
            margin-bottom: 32px;
            opacity: 0.9;
            line-height: 1.5;
        }
        
        .download-button {
            display: inline-block;
            padding: 16px 32px;
            background: rgba(255, 255, 255, 0.9);
            color: #333;
            text-decoration: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
            backdrop-filter: blur(10px);
        }
        
        .download-button:hover {
            background: white;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }
        
        .coming-soon {
            margin-top: 24px;
            font-size: 0.9rem;
            opacity: 0.7;
        }
        
        .credit {
            margin-top: 24px;
            font-size: 0.85rem;
        }
        
        .credit a {
            color: rgba(255, 255, 255, 0.7);
            text-decoration: none;
            background: rgba(255, 255, 255, 0.1);
            padding: 6px 12px;
            border-radius: 16px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.15);
            transition: all 0.3s ease;
            display: inline-block;
        }
        
        .credit a:hover {
            color: white;
            background: rgba(255, 255, 255, 0.15);
            border-color: rgba(255, 255, 255, 0.25);
            transform: translateY(-1px);
        }
        
        .crypto-addresses {
            margin-top: 48px;
            margin-bottom: 40px;
            font-size: 0.8rem;
            color: rgba(255,255,255,0.6);
            line-height: 1.8;
            text-align: left;
            max-width: 500px;
            margin-left: auto;
            margin-right: auto;
            padding: 0 20px;
        }
        
        .crypto-address {
            margin-bottom: 8px;
            cursor: pointer;
            padding: 4px;
            border-radius: 4px;
            transition: background 0.2s;
            outline: none;
        }
        
        .crypto-address:hover,
        .crypto-address:focus {
            background: rgba(255,255,255,0.1);
            outline: 2px solid rgba(255,255,255,0.3);
        }
        
        .crypto-address:last-child {
            margin-bottom: 0;
        }
        
        .app-store-badge {
            display: inline-block;
            overflow: hidden;
            border-radius: 13px;
            width: 250px;
            height: 83px;
            max-width: 100%;
        }
        
        .app-store-badge img {
            border-radius: 13px;
            width: 100%;
            height: auto;
            max-width: 250px;
        }
        
        @media (max-width: 480px) {
            .app-store-badge {
                width: 200px;
                height: 66px;
            }
        }
        
        .popular-section {
            margin-top: 48px;
            margin-bottom: 24px;
            width: 100%;
            max-width: 1200px;
            padding: 0 20px;
            flex-grow: 1;
        }
        
        .popular-title {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 32px;
            color: rgba(255,255,255,0.95);
        }
        
        .content-row {
            margin-bottom: 32px;
        }
        
        .row-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 16px;
            color: rgba(255,255,255,0.9);
            text-align: left;
        }
        
        .content-grid {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 16px;
            width: 100%;
        }
        
        .content-card {
            position: relative;
            transition: all 0.3s ease;
            min-width: 120px;
        }
        
        .content-card:hover {
            transform: translateY(-4px);
        }
        
        .content-poster {
            width: 100%;
            aspect-ratio: 2/3;
            object-fit: cover;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.6);
            background: rgba(255,255,255,0.1);
        }
        
        .content-link {
            text-decoration: none;
            color: inherit;
            display: block;
        }
        
        .loading-placeholder {
            width: 100%;
            aspect-ratio: 2/3;
            background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: rgba(255,255,255,0.5);
            font-size: 0.9rem;
        }
        
        @media (max-width: 768px) {
            .content-grid {
                grid-template-columns: repeat(4, 1fr);
            }
            .popular-title {
                font-size: 1.7rem;
            }
            .row-title {
                font-size: 1.1rem;
            }
        }
        
        @media (max-width: 480px) {
            .content-grid {
                grid-template-columns: repeat(3, 1fr);
            }
            .popular-section {
                padding: 0 16px;
            }
        }
    </style>
    
</head>
<body>
    <div class="background" id="dynamicBackground"></div>
    <div class="background-overlay"></div>
    <main class="container">
        <div class="main-content">
            <header>
                <div class="app-icon" role="img" aria-label="Verdict app icon"></div>
                <h1>Verdict</h1>
                <p class="subtitle">Watch. Rate. Share with friends</p>
            </header>
            <a href="https://go.daniyar.link/verdict-web" class="app-store-badge">
                <img src="https://tools.applemediaservices.com/api/badges/download-on-the-app-store/black/en-us?size=250x83&releaseDate=1559347200" alt="Download on the App Store">
            </a>
            <p class="credit">
                <a href="https://go.daniyar.link/x-verdictweb" target="_blank" rel="noopener">made by Daniyar Agabekov</a>
            </p>
        </div>
        
        <section class="popular-section">
            <div class="content-row">
                <div class="content-grid" id="moviesGrid">
                    <!-- Loading placeholders -->
                    <div class="content-card">
                        <div class="loading-placeholder">Loading...</div>
                    </div>
                    <div class="content-card">
                        <div class="loading-placeholder">Loading...</div>
                    </div>
                    <div class="content-card">
                        <div class="loading-placeholder">Loading...</div>
                    </div>
                    <div class="content-card">
                        <div class="loading-placeholder">Loading...</div>
                    </div>
                    <div class="content-card">
                        <div class="loading-placeholder">Loading...</div>
                    </div>
                    <div class="content-card">
                        <div class="loading-placeholder">Loading...</div>
                    </div>
                </div>
            </div>
            
            <div class="content-row">
                <div class="content-grid" id="tvGrid">
                    <!-- Loading placeholders -->
                    <div class="content-card">
                        <div class="loading-placeholder">Loading...</div>
                    </div>
                    <div class="content-card">
                        <div class="loading-placeholder">Loading...</div>
                    </div>
                    <div class="content-card">
                        <div class="loading-placeholder">Loading...</div>
                    </div>
                    <div class="content-card">
                        <div class="loading-placeholder">Loading...</div>
                    </div>
                    <div class="content-card">
                        <div class="loading-placeholder">Loading...</div>
                    </div>
                    <div class="content-card">
                        <div class="loading-placeholder">Loading...</div>
                    </div>
                </div>
            </div>
        </section>
        
        <section class="crypto-addresses">
            <div class="crypto-address" tabindex="0" onclick="copyToClipboard('1MvQWAR59BhG7FMax1C6fwjQicVGPFG3sU', this)" onkeydown="handleKeyDown(event, '1MvQWAR59BhG7FMax1C6fwjQicVGPFG3sU', this)" aria-label="Click to copy Bitcoin address">Bitcoin: 1MvQWAR59BhG7FMax1C6fwjQicVGPFG3sU</div>
            <div class="crypto-address" tabindex="0" onclick="copyToClipboard('0x8dfaf5324850cc8098d772c64ea515a97c610043', this)" onkeydown="handleKeyDown(event, '0x8dfaf5324850cc8098d772c64ea515a97c610043', this)" aria-label="Click to copy Ethereum address">Ethereum (ERC20): 0x8dfaf5324850cc8098d772c64ea515a97c610043</div>
            <div class="crypto-address" tabindex="0" onclick="copyToClipboard('CED4M3F1eCKUPj33AknaSjSHprdTRnaQt5FnsgMALYZB', this)" onkeydown="handleKeyDown(event, 'CED4M3F1eCKUPj33AknaSjSHprdTRnaQt5FnsgMALYZB', this)" aria-label="Click to copy Solana address">Solana: CED4M3F1eCKUPj33AknaSjSHprdTRnaQt5FnsgMALYZB</div>
            <div class="crypto-address" tabindex="0" onclick="copyToClipboard('TKyKGBqKDHdb1X9znkmfGeL4sRiNxvMJ2h', this)" onkeydown="handleKeyDown(event, 'TKyKGBqKDHdb1X9znkmfGeL4sRiNxvMJ2h', this)" aria-label="Click to copy TRX address">TRX (TRC20): TKyKGBqKDHdb1X9znkmfGeL4sRiNxvMJ2h</div>
        </section>
    </main>
    
    <!-- Simple Analytics - 100% privacy-first analytics -->
    <script async src="https://scripts.simpleanalyticscdn.com/latest.js"></script>
    <script>
        function copyToClipboard(text, element) {
            if (navigator.clipboard && navigator.clipboard.writeText) {
                navigator.clipboard.writeText(text).then(function() {
                    showCopyFeedback(element, true);
                }).catch(function(err) {
                    console.error('Clipboard API failed: ', err);
                    fallbackCopyToClipboard(text, element);
                });
            } else {
                fallbackCopyToClipboard(text, element);
            }
        }
        
        function fallbackCopyToClipboard(text, element) {
            const textArea = document.createElement('textarea');
            textArea.value = text;
            textArea.style.position = 'fixed';
            textArea.style.left = '-999999px';
            textArea.style.top = '-999999px';
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
                const successful = document.execCommand('copy');
                showCopyFeedback(element, successful);
            } catch (err) {
                console.error('Fallback copy failed: ', err);
                showCopyFeedback(element, false);
            }
            
            document.body.removeChild(textArea);
        }
        
        function showCopyFeedback(element, success) {
            const originalText = element.innerHTML;
            const message = success ? '✓ Copied!' : '✗ Copy failed';
            const color = success ? '#4CAF50' : '#f44336';
            
            element.innerHTML = originalText + ' <span style="color: ' + color + ';">' + message + '</span>';
            setTimeout(function() {
                element.innerHTML = originalText;
            }, 2000);
        }
        
        function handleKeyDown(event, text, element) {
            if (event.key === 'Enter' || event.key === ' ') {
                event.preventDefault();
                copyToClipboard(text, element);
            }
        }
        
        // Load popular content
        async function loadPopularContent() {
            try {
                console.log('Loading popular content...');
                // Use the existing API endpoints that already handle TMDB API calls
                const [moviesResponse, tvResponse] = await Promise.all([
                    fetch('/api/popular-movies'),
                    fetch('/api/popular-tv')
                ]);
                
                console.log('API responses:', moviesResponse.status, tvResponse.status);
                
                if (!moviesResponse.ok || !tvResponse.ok) {
                    throw new Error(`API request failed: movies ${moviesResponse.status}, tv ${tvResponse.status}`);
                }
                
                const moviesData = await moviesResponse.json();
                const tvData = await tvResponse.json();
                
                console.log('Movies data:', moviesData);
                console.log('TV data:', tvData);
                
                const movies = moviesData.results?.slice(0, 6) || [];
                const tvShows = tvData.results?.slice(0, 6) || [];
                
                console.log('Movies to render:', movies.length);
                console.log('TV shows to render:', tvShows.length);
                
                renderMovies(movies);
                renderTvShows(tvShows);
                
                // Set background from first movie with good backdrop/poster
                setDynamicBackground([...movies, ...tvShows]);
            } catch (error) {
                console.error('Error loading popular content:', error);
                // Hide the popular section if there's an error
                const popularSection = document.querySelector('.popular-section');
                if (popularSection) {
                    popularSection.style.display = 'none';
                }
            }
        }
        
        function renderMovies(movies) {
            const moviesGrid = document.getElementById('moviesGrid');
            if (!moviesGrid) return;
            
            console.log('Rendering movies:', movies.length);
            
            moviesGrid.innerHTML = movies.map(movie => `
                <a href="/movie/${movie.id}" class="content-link">
                    <div class="content-card">
                        <img src="${movie.poster_path 
                            ? `https://image.tmdb.org/t/p/w300${movie.poster_path}` 
                            : 'https://via.placeholder.com/300x450/cccccc/666666?text=No+Image'}" 
                            alt="${movie.title || 'Movie'}" 
                            class="content-poster" 
                            loading="lazy" 
                            decoding="async"
                            onerror="this.src='https://via.placeholder.com/300x450/cccccc/666666?text=No+Image'">
                    </div>
                </a>
            `).join('');
        }
        
        function renderTvShows(tvShows) {
            const tvGrid = document.getElementById('tvGrid');
            if (!tvGrid) return;
            
            console.log('Rendering TV shows:', tvShows.length);
            
            tvGrid.innerHTML = tvShows.map(show => `
                <a href="/tv/${show.id}" class="content-link">
                    <div class="content-card">
                        <img src="${show.poster_path 
                            ? `https://image.tmdb.org/t/p/w300${show.poster_path}` 
                            : 'https://via.placeholder.com/300x450/cccccc/666666?text=No+Image'}" 
                            alt="${show.name || 'TV Show'}" 
                            class="content-poster" 
                            loading="lazy" 
                            decoding="async"
                            onerror="this.src='https://via.placeholder.com/300x450/cccccc/666666?text=No+Image'">
                    </div>
                </a>
            `).join('');
        }
        
        function setDynamicBackground(allContent) {
            if (!allContent || allContent.length === 0) return;
            
            // Find first item with a good backdrop
            let backdropUrl = '';
            for (const item of allContent) {
                if (item.backdrop_path) {
                    backdropUrl = `https://image.tmdb.org/t/p/w1280${item.backdrop_path}`;
                    break;
                }
            }
            
            // Fallback to poster if no backdrop found
            if (!backdropUrl) {
                for (const item of allContent) {
                    if (item.poster_path) {
                        backdropUrl = `https://image.tmdb.org/t/p/w500${item.poster_path}`;
                        break;
                    }
                }
            }
            
            if (backdropUrl) {
                console.log('Setting dynamic background:', backdropUrl);
                const backgroundElement = document.getElementById('dynamicBackground');
                
                if (backgroundElement) {
                    backgroundElement.style.backgroundImage = `url('${backdropUrl}')`;
                }
            }
        }
        
        // Load popular content when the page loads
        document.addEventListener('DOMContentLoaded', function() {
            loadPopularContent();
        });
    </script>
</body>
</html>
